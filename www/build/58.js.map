{"version":3,"sources":["../../src/pages/google-maps/google-maps.ts","../../src/pages/google-maps/google-maps.module.ts"],"names":[],"mappings":"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","file":"58.js","sourcesContent":["import { Component, ViewChild, ElementRef, Injectable } from '@angular/core';\nimport { IonicPage, NavController, NavParams, App } from 'ionic-angular';\nimport { GlobalFunction } from '../../providers/common/global-function';\nimport { GlobalVars } from '../../providers/common/global-vars';\nimport { JsonStoreCrudProvider } from './../../providers/common/json-store/json-store-crud';\nimport { Domains } from '../../pojo/commonEnum/Domains';\n\ndeclare var google;\n\n@IonicPage()\n@Component({\n  selector: 'page-google-maps',\n  templateUrl: 'google-maps.html',\n})\n@Injectable() export class GoogleMapsPage {\n\n  public geocoder;\n\n  @ViewChild('map') mapElement: ElementRef;\n  public map: any;\n  public locationList: any = [];\n  public items: any = [];\n  public soType;\n\n  constructor(\n    public navCtrl: NavController,\n    public appCtrl: App,\n    public gv: GlobalVars,\n    public gf: GlobalFunction,\n    public jsonStoreCurd: JsonStoreCrudProvider,\n    public navParams: NavParams) {\n\n    this.soType = this.navParams.get(\"paramIndex\");\n    this.filterSOType(this.soType);\n  }\n\n  filterSOType(param: any): void {\n\n    if (this.soType !== 'undefined' && this.soType !== '' && this.soType !== null) {\n\n      var querypart: any = [];\n      querypart = [{ \"$equal\": [{ \"worktype\": param.toUpperCase() }] }];\n\n      if (param.trim() != \"\") {\n\n        this.locationList = [];\n\n        this.jsonStoreCurd.getSearchArrayResult(Domains.LPCWORKORDER, querypart).then(result => {\n          this.items = result;\n          debugger;\n          var totalLat: Number = 0;\n          var totalLong: Number = 0;\n          var count: Number = 0;\n          for (var i = 0; i < this.items.length; i++) {\n\n            var lat = this.items[i].json.woserviceaddress[0].latitudey;\n            var long = this.items[i].json.woserviceaddress[0].longitudex;\n            var wonum = this.items[i].json.wonum;\n\n            if ((typeof lat !== 'undefined' && lat !== '' && lat !== null) && (typeof long !== 'undefined' && long !== '' && long !== null)) {\n              totalLat = Number(totalLat) + Number(lat);\n              totalLong = Number(totalLong) + Number(long);\n              count = Number(count) + 1;\n              this.locationList.push([wonum, lat, long, i]);\n            }\n          }\n          let latitude: Number = Number(totalLat) / Number(count);\n          let longtitude: Number = Number(totalLong) / Number(count);\n          debugger;\n          this.loadMap(this.locationList, latitude, longtitude);\n        });\n      }\n    }\n  };\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad GoogleMapsPage');\n  }\n\n  dashboardPage() {\n\n    let newRootNav = <NavController>this.appCtrl.getRootNavById('n4');\n    newRootNav.push(\"SearchPage\", '');\n  }\n\n  loadMap(locations, lat, long) {\n\n    var map = new google.maps.Map(this.mapElement.nativeElement, {\n      zoom: 10,\n      center: new google.maps.LatLng(lat, long),\n      mapTypeId: google.maps.MapTypeId.ROADMAP\n    });\n\n    var infowindow = new google.maps.InfoWindow();\n    var marker, i;\n\n    for (i = 0; i < locations.length; i++) {\n\n      marker = new google.maps.Marker({\n        position: new google.maps.LatLng(locations[i][1], locations[i][2]),\n        map: map\n      });\n\n      google.maps.event.addListener(marker, 'click', (function (marker, i) {\n\n        return function () {\n\n          infowindow.setContent(locations[i][0]);\n          infowindow.open(map, marker);\n        }\n      })(marker, i));\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/google-maps/google-maps.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { GoogleMapsPage } from './google-maps';\n\n@NgModule({\n  declarations: [\n    GoogleMapsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(GoogleMapsPage),\n  ]\n})\nexport class GoogleMapsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/google-maps/google-maps.module.ts"],"sourceRoot":""}